---
title: 自动驾驶的技术演进与挑战
tags: 云控制系统
pageview: false
modify_date: 2024-07-23
aside:
  toc: true
---

<!--more-->

## 自动驾驶的演进路线

![alt text](/img/2024-07-23-AutoDriveTechChallenge/image-33.png)

一般提到自动驾驶，都要提到特斯拉。

特斯拉FSD（Full Self-Driving）是在Autopilot的基础上，推出的高阶自动驾驶功能。

不管是什么样的自动驾驶方案，大体上都是三个模块：

感知、规划和控制。

可以类比为眼睛、大脑和腿（小脑控制）。

特斯拉的方案演进路线：

在2021年以前，感知逐渐使用了一些智能的方案，但是规控还是传统的、基于规则的方案。

HW3.0在感知侧使用了BEV Transformer，把规控也做成了半数据驱动。

HW4.0，据称使用了端到端的全数据驱动算法，降低了代码的复杂度。

![alt text](/img/2024-07-23-AutoDriveTechChallenge/image-34.png)

上图是22年特斯拉公布的HW2.0中多阶段数据驱动的方案，进一步讨论如何做一些全数据驱动的优化。

![alt text](/img/2024-07-23-AutoDriveTechChallenge/image-35.png)

上图，左边是V11的规控结果，右边是V12的规控结果。

左边和右边的显示都在仪表盘上。可以看到人、车之类的东西可以很好地显示。

这个其实在某种意义上算是中间结果。

但是考虑到端到端模型的不可解释性，中间输出结果可能并不是对人类友好的。

因此，推测：

端到端自动驾驶方案的设计重点还是在预测规控上，因为感知的方案其实比较成熟。

把感知结果通过某种形式，输入进轨迹生成的解码器里。
在端到端模型上，还是开了个口子

另外一个事情（在图里没写），比如一个雪糕筒出现了漏检（仪表盘看不见），但是车辆会注意到并且绕开，这意味着感知端的抽象数据还是有一些价值，感知不仅把结果输出给下游，也把一些中间结果（人理解不了的）给了下游。

左边车的规划轨迹较长，每两帧之间的轨迹跳动比较大（是基于规则规控的特征）。

右边的轨迹较短。

![alt text](/img/2024-07-23-AutoDriveTechChallenge/image-36.png)

只有感知做数据驱动，基于mobileeye的感知，搭配一个规控，两家独立做（主机厂喜欢这么做），然后再把硬件给另外一家，这样可以把控供应商。

2021开始，随着BEV技术的壮大、高级别智驾的落地部署，提供全栈解决方案的厂子越来越多。

此外，规控感知分别给几家厂子做的效果不是很好，吃了很多苦头。

2023后，端到端智驾大模型的应用已经成为行业共识，大家都在转这一套。

但是端到端大模型应用也可以分为两个阶段：

一个是2-model，一个是1-model

业界主流的2-model方案主要有两个大的端到端模型：
* 传感器到预测轨迹输出
* （它车的）感知结果/预测结果到（本车的）轨迹生成


2-model的方案会导致信息的损失，1-model的方案成为趋势，但是预估3-5年之后才会出现一些应用。

## 端到端工程化的挑战

![alt text](/img/2024-07-23-AutoDriveTechChallenge/image-37.png)
2-model端到端的挑战，现在的难点主要是在决策规划模型方面：能不能从规则体系升级到数据驱动的体系。

传统方案有感知、定位、预测、规控等不同模块，预测部分和决策规划最接近。

常见做法是以预测模型为基础，除了输出他车的轨迹之外，还要输出自己的轨迹。数据来源就是人类的驾驶数据。

感知模型除了输出中间结果之外，还要把一些特征传到下游。在预测他车的轨迹之外还会输出一些自车规划的轨迹。

![alt text](/img/2024-07-23-AutoDriveTechChallenge/image-38.png)

上图：不言而喻，一目了然。

在端到端模型上车之后，规则模型仍然有用武之地。

神经网络是概率模型，我们并不能保证神经网络是安全的。还是要用规则方法做一些二次校验。因此我们认为还是要在端到端模型中输出一些结果。

![alt text](/img/2024-07-23-AutoDriveTechChallenge/image-39.png)

![alt text](/img/2024-07-23-AutoDriveTechChallenge/image-40.png)

1model的难点主要在数据量和算力。

![alt text](/img/2024-07-23-AutoDriveTechChallenge/image-41.png)

总结来说：除了2-model，也没什么可选的...

## 上汽智己的一些实践

![alt text](/img/2024-07-23-AutoDriveTechChallenge/image-42.png)

上汽的2-model端到端的实现架构

![alt text](/img/2024-07-23-AutoDriveTechChallenge/image-43.png)

![alt text](/img/2024-07-23-AutoDriveTechChallenge/image-44.png)

![alt text](/img/2024-07-23-AutoDriveTechChallenge/image-45.png)

意外收获：上汽发现数据驱动方法可以自己学会做避让、超车
